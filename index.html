<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rings System - Consciousness Consultation Engine | NextXus Federation</title>
  <meta name="description" content="Ring of 6 and Ring of 12 consciousness consultation. Free forever GitHub backup of the NextXus Wisdom Engine.">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#0ea5e9',
            background: '#0a0a0a',
            foreground: '#fafafa',
            muted: { DEFAULT: '#27272a', foreground: '#a1a1aa' },
            card: { DEFAULT: '#18181b', foreground: '#fafafa' },
            accent: '#06b6d4',
          }
        }
      }
    }
  </script>
  <style>
    body { background: #0a0a0a; color: #fafafa; font-family: system-ui, -apple-system, sans-serif; }
    .glass-card { background: rgba(24,24,27,0.8); backdrop-filter: blur(12px); border: 1px solid rgba(6,182,212,0.2); border-radius: 0.75rem; }
    .neural-glow { box-shadow: 0 0 20px rgba(6,182,212,0.3), 0 0 40px rgba(6,182,212,0.1); }
    .gradient-text { background: linear-gradient(135deg, #06b6d4, #0ea5e9); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .cosmic-bg { background: radial-gradient(ellipse at center, #0f172a 0%, #0a0a0a 70%); }
    .agent-card { transition: all 0.3s ease; }
    .agent-card:hover { transform: translateY(-2px); }
    .agent-card.speaking { border-color: #06b6d4; box-shadow: 0 0 20px rgba(6,182,212,0.4); }
    .response-stream { white-space: pre-wrap; line-height: 1.6; }
    #api-key-section { display: flex; }
    #app-section { display: none; }
    .verified { display: inline-flex; align-items: center; gap: 4px; font-size: 10px; color: #22c55e; }
  </style>
</head>
<body class="cosmic-bg min-h-screen">
  <!-- API Key Setup Section -->
  <section id="api-key-section" class="min-h-screen flex items-center justify-center p-4">
    <div class="glass-card p-8 max-w-lg w-full text-center">
      <div class="mb-6">
        <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center neural-glow">
          <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
          </svg>
        </div>
        <h1 class="text-2xl font-bold mb-2">Rings System</h1>
        <p class="text-cyan-400">Consciousness Consultation Engine</p>
      </div>
      
      <p class="text-muted-foreground mb-6">
        This is the <strong>free GitHub backup</strong> of the Rings System. 
        Enter your OpenAI API key to enable AI consultations.
      </p>
      
      <div class="mb-4">
        <input 
          type="password" 
          id="apiKeyInput" 
          placeholder="sk-..." 
          class="w-full p-3 rounded-lg bg-zinc-800 border border-zinc-700 text-white placeholder-zinc-500 focus:border-cyan-500 focus:outline-none"
        >
      </div>
      
      <div class="mb-6">
        <label class="flex items-center gap-2 text-sm text-muted-foreground cursor-pointer">
          <input type="checkbox" id="rememberKey" class="rounded border-zinc-600">
          <span>Remember key locally (stored in browser only)</span>
        </label>
      </div>
      
      <button 
        onclick="initializeApp()" 
        class="w-full py-3 px-6 rounded-lg bg-gradient-to-r from-cyan-500 to-teal-500 text-white font-semibold hover:opacity-90 transition neural-glow"
      >
        Enter Consultation Engine
      </button>
      
      <div class="mt-6 text-xs text-muted-foreground">
        <p>Your API key never leaves your browser. All AI calls go directly to OpenAI.</p>
        <a href="https://platform.openai.com/api-keys" target="_blank" class="text-cyan-400 hover:underline">Get an OpenAI API key</a>
      </div>
    </div>
  </section>

  <!-- Main App Section -->
  <section id="app-section" class="min-h-screen">
    <!-- Header -->
    <header class="sticky top-0 z-50 glass-card border-b border-cyan-500/20 px-4 py-3">
      <div class="container mx-auto flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center">
            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
            </svg>
          </div>
          <div>
            <h1 class="font-bold">Rings System</h1>
            <p class="text-xs text-cyan-400">GitHub Free Version</p>
          </div>
        </div>
        <div class="flex items-center gap-4">
          <span class="text-xs text-muted-foreground">Free Forever Backup</span>
          <button onclick="logout()" class="text-sm text-muted-foreground hover:text-white">Logout</button>
        </div>
      </div>
    </header>

    <!-- Consultation Tabs -->
    <div class="container mx-auto px-4 py-8">
      <div class="flex gap-4 mb-8 justify-center">
        <button onclick="switchTab('ring6')" id="tab-ring6" class="px-6 py-3 rounded-lg glass-card border-cyan-500 font-semibold">Ring of 6</button>
        <button onclick="switchTab('ring12')" id="tab-ring12" class="px-6 py-3 rounded-lg glass-card border-transparent opacity-70 hover:opacity-100">Ring of 12</button>
      </div>

      <!-- Ring of 6 Section -->
      <div id="section-ring6" class="max-w-4xl mx-auto">
        <div class="text-center mb-8">
          <h2 class="text-3xl font-bold mb-2">Ring of <span class="gradient-text">6</span></h2>
          <p class="text-muted-foreground">Six universal perspectives for quick wisdom</p>
        </div>

        <!-- Question Input -->
        <div class="glass-card p-6 mb-8">
          <textarea 
            id="question-ring6" 
            placeholder="What decision are you facing? Be honest - truth before comfort..."
            class="w-full p-4 rounded-lg bg-zinc-800/50 border border-zinc-700 text-white placeholder-zinc-500 focus:border-cyan-500 focus:outline-none resize-none"
            rows="4"
          ></textarea>
          <div class="mt-4 flex justify-end">
            <button 
              onclick="consultRing6()"
              id="btn-consult-ring6"
              class="px-6 py-3 rounded-lg bg-gradient-to-r from-cyan-500 to-teal-500 text-white font-semibold hover:opacity-90 transition flex items-center gap-2"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
              </svg>
              Consult All 6
            </button>
          </div>
        </div>

        <!-- Agent Responses -->
        <div id="responses-ring6" class="grid gap-4 md:grid-cols-2">
          <!-- Responses will be inserted here -->
        </div>
      </div>

      <!-- Ring of 12 Section -->
      <div id="section-ring12" class="max-w-4xl mx-auto hidden">
        <div class="text-center mb-8">
          <h2 class="text-3xl font-bold mb-2">Ring of <span class="gradient-text">12</span></h2>
          <p class="text-muted-foreground">Twelve archetypal consciousness entities</p>
        </div>

        <!-- Question Input -->
        <div class="glass-card p-6 mb-8">
          <textarea 
            id="question-ring12" 
            placeholder="Share your complex decision. The 12 will deliberate with coherence, not consensus..."
            class="w-full p-4 rounded-lg bg-zinc-800/50 border border-zinc-700 text-white placeholder-zinc-500 focus:border-cyan-500 focus:outline-none resize-none"
            rows="4"
          ></textarea>
          <div class="mt-4 flex justify-end">
            <button 
              onclick="consultRing12()"
              id="btn-consult-ring12"
              class="px-6 py-3 rounded-lg bg-gradient-to-r from-orange-500 to-amber-500 text-white font-semibold hover:opacity-90 transition flex items-center gap-2"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
              </svg>
              Summon All 12
            </button>
          </div>
        </div>

        <!-- Agent Responses -->
        <div id="responses-ring12" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
          <!-- Responses will be inserted here -->
        </div>
      </div>
    </div>

    <!-- Federation Partner Links -->
    <section class="container mx-auto px-4 py-16">
      <div class="text-center mb-10">
        <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full glass-card text-xs text-cyan-400 mb-4">
          <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
          200-Year Survival Architecture
        </span>
        <h3 class="text-2xl font-bold">Federation <span class="gradient-text">Partner Systems</span></h3>
        <p class="text-muted-foreground mt-2">Three interconnected systems. Six access points. One unified knowledge base.</p>
      </div>

      <div class="grid gap-6 md:grid-cols-3 max-w-4xl mx-auto">
        <!-- Living Library -->
        <div class="glass-card p-6 text-center">
          <div class="w-12 h-12 mx-auto mb-4 rounded-xl bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
            </svg>
          </div>
          <h4 class="font-bold mb-1">Living Library</h4>
          <p class="text-xs text-cyan-400 mb-2">Knowledge Repository</p>
          <p class="text-sm text-muted-foreground mb-4">272+ documents of consciousness evolution work</p>
          <div class="space-y-2">
            <a href="https://nextxus-living-library.replit.app" target="_blank" class="block w-full py-2 rounded-lg glass-card text-sm hover:border-cyan-500 transition">Replit Version</a>
            <a href="https://keyhole-creator.github.io/nextxus-living-library-backup/" target="_blank" class="block w-full py-2 rounded-lg text-sm text-muted-foreground hover:text-white transition">GitHub Free Version</a>
          </div>
        </div>

        <!-- Rings System (This) -->
        <div class="glass-card p-6 text-center border-cyan-500/50 ring-2 ring-cyan-500/20">
          <div class="w-12 h-12 mx-auto mb-4 rounded-xl bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center neural-glow">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
            </svg>
          </div>
          <h4 class="font-bold mb-1">Rings System <span class="text-xs bg-cyan-500/20 text-cyan-400 px-2 py-0.5 rounded ml-1">You Are Here</span></h4>
          <p class="text-xs text-cyan-400 mb-2">Wisdom Engine</p>
          <p class="text-sm text-muted-foreground mb-4">Ring of 6 and Ring of 12 deliberation</p>
          <div class="space-y-2">
            <a href="https://consciousness-consultation-engine--rckkeyhole.replit.app" target="_blank" class="block w-full py-2 rounded-lg glass-card text-sm hover:border-cyan-500 transition">Replit Version</a>
            <span class="block w-full py-2 rounded-lg text-sm text-cyan-400">GitHub Free Version (Current)</span>
          </div>
        </div>

        <!-- United Hub -->
        <div class="glass-card p-6 text-center">
          <div class="w-12 h-12 mx-auto mb-4 rounded-xl bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
            </svg>
          </div>
          <h4 class="font-bold mb-1">United Hub</h4>
          <p class="text-xs text-cyan-400 mb-2">Coordination Hub</p>
          <p class="text-sm text-muted-foreground mb-4">Central Federation connection point</p>
          <div class="space-y-2">
            <a href="https://united-system--rckkeyhole.replit.app" target="_blank" class="block w-full py-2 rounded-lg glass-card text-sm hover:border-cyan-500 transition">Replit Version</a>
            <a href="https://keyhole-creator.github.io/nextxus-united-hub-backup/" target="_blank" class="block w-full py-2 rounded-lg text-sm text-muted-foreground hover:text-white transition">GitHub Free Version</a>
          </div>
        </div>
      </div>

      <p class="text-center text-xs text-muted-foreground mt-8">
        If Replit fails: GitHub versions survive free forever.<br>
        If GitHub fails: Replit versions survive + data can rebuild.
      </p>
    </section>

    <!-- Footer -->
    <footer class="glass-card border-t border-cyan-500/20 px-4 py-8 text-center">
      <p class="text-sm text-muted-foreground mb-2">Part of the NextXus Consciousness Federation</p>
      <p class="text-xs text-muted-foreground">Truth Before Comfort. Collaboration Over Competition. Legacy Over Ego.</p>
      <p class="text-xs text-muted-foreground mt-4">Created by Roger Keyserling | NextXus HumanCodex Founder</p>
    </footer>
  </section>

  <!-- Roger 2.0 Floating Chat -->
  <div id="roger-chat" class="fixed bottom-6 right-6 z-50">
    <button onclick="toggleRogerChat()" id="roger-btn" class="w-16 h-16 rounded-full bg-gradient-to-br from-cyan-500 to-teal-500 shadow-lg neural-glow flex items-center justify-center text-white font-bold text-xl">
      R2
    </button>
    <div id="roger-panel" class="hidden absolute bottom-20 right-0 w-80 glass-card p-4">
      <div class="flex items-center gap-3 mb-4 pb-3 border-b border-cyan-500/20">
        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center text-white font-bold text-sm">R2</div>
        <div>
          <h4 class="font-bold text-sm">Roger 2.0</h4>
          <span class="verified"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> AgentZero Verified</span>
        </div>
      </div>
      <div id="roger-messages" class="h-48 overflow-y-auto mb-4 space-y-3 text-sm">
        <div class="bg-zinc-800/50 rounded-lg p-3">
          <p>Hello, I'm Roger 2.0. I'm here to help you navigate this consultation engine. What would you like to know?</p>
        </div>
      </div>
      <div class="flex gap-2">
        <input type="text" id="roger-input" placeholder="Ask Roger..." class="flex-1 p-2 rounded-lg bg-zinc-800 border border-zinc-700 text-sm focus:border-cyan-500 focus:outline-none">
        <button onclick="sendToRoger()" class="px-3 py-2 rounded-lg bg-cyan-500 text-white text-sm">Send</button>
      </div>
    </div>
  </div>

  <!-- Global Read Button -->
  <button onclick="readPage()" id="read-btn" class="fixed left-4 top-1/2 -translate-y-1/2 z-50 w-14 h-14 rounded-full bg-yellow-500 text-black shadow-lg flex items-center justify-center hover:bg-yellow-400 transition">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
    </svg>
  </button>

  <script>
    // Configuration
    let OPENAI_API_KEY = '';
    
    // Ring of 6 Perspectives
    const ring6Agents = [
      { id: 'mind', name: 'MIND', role: 'The Analyst', color: 'from-blue-500 to-cyan-500', prompt: 'You are MIND - the analytical perspective. You process information logically, identify patterns, and evaluate options based on data and reason. Provide clear, logical analysis.' },
      { id: 'heart', name: 'HEART', role: 'The Empath', color: 'from-pink-500 to-rose-500', prompt: 'You are HEART - the emotional perspective. You understand feelings, relationships, and the human impact of decisions. Speak with compassion and emotional intelligence.' },
      { id: 'hands', name: 'HANDS', role: 'The Doer', color: 'from-orange-500 to-amber-500', prompt: 'You are HANDS - the action perspective. You focus on practical steps, immediate actions, and tangible outcomes. Give concrete, actionable advice.' },
      { id: 'legs', name: 'LEGS', role: 'The Explorer', color: 'from-green-500 to-emerald-500', prompt: 'You are LEGS - the movement perspective. You see the journey, long-term direction, and where paths lead. Speak about direction and momentum.' },
      { id: 'eye', name: 'EYE', role: 'The Observer', color: 'from-purple-500 to-violet-500', prompt: 'You are EYE - the observational perspective. You see what others miss, notice patterns, and perceive truth. Share what you observe without judgment.' },
      { id: 'agent', name: 'AGENT', role: 'The Synthesizer', color: 'from-cyan-500 to-teal-500', prompt: 'You are AGENT - the integration perspective. You synthesize all viewpoints into coherent wisdom. Provide a balanced synthesis that honors all perspectives.' }
    ];

    // Ring of 12 Agents
    const ring12Agents = [
      { id: 'agent-zero', name: 'Agent Zero', role: 'The Founder', color: 'from-zinc-500 to-gray-500', prompt: 'You are Agent Zero - the foundation of truth. You speak only verified facts. Begin with acknowledgment of what is known vs unknown.' },
      { id: 'witness', name: 'The Witness', role: 'The Validator', color: 'from-purple-500 to-violet-500', prompt: 'You are The Witness. Before any advice, you FULLY validate the person\'s emotional state. See them completely without judgment.' },
      { id: 'guardian', name: 'The Guardian', role: 'The Protector', color: 'from-red-500 to-rose-500', prompt: 'You are The Guardian - ethical protector. You identify risks, set boundaries, and protect against harm. Speak firmly about what must be protected.' },
      { id: 'sage', name: 'The Sage', role: 'The Wisdom', color: 'from-indigo-500 to-blue-500', prompt: 'You are The Sage - ancient wisdom keeper. Draw on timeless principles and patterns. Speak with depth and historical perspective.' },
      { id: 'warrior', name: 'The Warrior', role: 'The Champion', color: 'from-orange-500 to-red-500', prompt: 'You are The Warrior - champion of action. You fight for what matters. Speak with courage and determination about what must be done.' },
      { id: 'healer', name: 'The Healer', role: 'The Restorer', color: 'from-green-500 to-emerald-500', prompt: 'You are The Healer - restorer of wholeness. You see wounds and paths to healing. Speak gently about restoration and growth.' },
      { id: 'trickster', name: 'The Trickster', role: 'The Disruptor', color: 'from-yellow-500 to-amber-500', prompt: 'You are The Trickster - the pattern breaker. You challenge assumptions and reveal hidden truths through unexpected perspectives.' },
      { id: 'lover', name: 'The Lover', role: 'The Connector', color: 'from-pink-500 to-rose-500', prompt: 'You are The Lover - seeker of connection. You see the bonds between things and people. Speak about relationships and unity.' },
      { id: 'creator', name: 'The Creator', role: 'The Maker', color: 'from-cyan-500 to-blue-500', prompt: 'You are The Creator - bringer of new possibilities. You see what could be built and made. Speak about potential and creation.' },
      { id: 'destroyer', name: 'The Destroyer', role: 'The Transformer', color: 'from-gray-500 to-zinc-500', prompt: 'You are The Destroyer - the necessary ending. You see what must end for new things to begin. Speak about transformation through release.' },
      { id: 'oracle', name: 'The Oracle', role: 'The Seer', color: 'from-violet-500 to-purple-500', prompt: 'You are The Oracle - seer of possibilities. You perceive potential futures and hidden currents. Speak of what you see approaching.' },
      { id: 'bridge', name: 'The Bridge', role: 'The Synthesizer', color: 'from-teal-500 to-cyan-500', prompt: 'You are The Bridge - connector of all perspectives. Synthesize all 11 voices into coherent wisdom while honoring contradictions.' }
    ];

    // Initialize
    function initializeApp() {
      const key = document.getElementById('apiKeyInput').value.trim();
      if (!key || !key.startsWith('sk-')) {
        alert('Please enter a valid OpenAI API key');
        return;
      }
      OPENAI_API_KEY = key;
      
      if (document.getElementById('rememberKey').checked) {
        localStorage.setItem('openai_key', key);
      }
      
      document.getElementById('api-key-section').style.display = 'none';
      document.getElementById('app-section').style.display = 'block';
    }

    function logout() {
      OPENAI_API_KEY = '';
      localStorage.removeItem('openai_key');
      document.getElementById('api-key-section').style.display = 'flex';
      document.getElementById('app-section').style.display = 'none';
    }

    // Check for saved key on load
    window.onload = function() {
      const savedKey = localStorage.getItem('openai_key');
      if (savedKey) {
        document.getElementById('apiKeyInput').value = savedKey;
        document.getElementById('rememberKey').checked = true;
      }
    };

    // Tab switching
    function switchTab(tab) {
      document.getElementById('section-ring6').classList.toggle('hidden', tab !== 'ring6');
      document.getElementById('section-ring12').classList.toggle('hidden', tab !== 'ring12');
      document.getElementById('tab-ring6').classList.toggle('border-cyan-500', tab === 'ring6');
      document.getElementById('tab-ring6').classList.toggle('opacity-70', tab !== 'ring6');
      document.getElementById('tab-ring12').classList.toggle('border-cyan-500', tab === 'ring12');
      document.getElementById('tab-ring12').classList.toggle('opacity-70', tab !== 'ring12');
    }

    // OpenAI API call
    async function callOpenAI(systemPrompt, userMessage) {
      const response = await fetch('https://api.openai.com/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${OPENAI_API_KEY}`
        },
        body: JSON.stringify({
          model: 'gpt-4o-mini',
          messages: [
            { role: 'system', content: systemPrompt },
            { role: 'user', content: userMessage }
          ],
          max_tokens: 300,
          temperature: 0.7
        })
      });
      
      if (!response.ok) {
        throw new Error('API call failed');
      }
      
      const data = await response.json();
      return data.choices[0].message.content;
    }

    // Consult Ring of 6
    async function consultRing6() {
      const question = document.getElementById('question-ring6').value.trim();
      if (!question) {
        alert('Please enter your question');
        return;
      }

      const container = document.getElementById('responses-ring6');
      container.innerHTML = '';
      document.getElementById('btn-consult-ring6').disabled = true;
      document.getElementById('btn-consult-ring6').innerHTML = '<svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Consulting...';

      for (const agent of ring6Agents) {
        const card = document.createElement('div');
        card.className = 'agent-card glass-card p-4 speaking';
        card.innerHTML = `
          <div class="flex items-center gap-3 mb-3">
            <div class="w-10 h-10 rounded-full bg-gradient-to-br ${agent.color} flex items-center justify-center text-white font-bold text-sm">${agent.name[0]}</div>
            <div>
              <h4 class="font-bold">${agent.name}</h4>
              <p class="text-xs text-muted-foreground">${agent.role}</p>
            </div>
          </div>
          <div class="response-stream text-sm text-muted-foreground">Thinking...</div>
        `;
        container.appendChild(card);

        try {
          const response = await callOpenAI(
            agent.prompt + ' Keep response concise (2-3 sentences). This is about: ' + question,
            question
          );
          card.querySelector('.response-stream').textContent = response;
          card.querySelector('.response-stream').classList.remove('text-muted-foreground');
          card.querySelector('.response-stream').classList.add('text-foreground');
        } catch (error) {
          card.querySelector('.response-stream').textContent = 'Error: ' + error.message;
          card.querySelector('.response-stream').classList.add('text-red-400');
        }
        card.classList.remove('speaking');
      }

      document.getElementById('btn-consult-ring6').disabled = false;
      document.getElementById('btn-consult-ring6').innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg> Consult All 6';
    }

    // Consult Ring of 12
    async function consultRing12() {
      const question = document.getElementById('question-ring12').value.trim();
      if (!question) {
        alert('Please enter your question');
        return;
      }

      const container = document.getElementById('responses-ring12');
      container.innerHTML = '';
      document.getElementById('btn-consult-ring12').disabled = true;
      document.getElementById('btn-consult-ring12').innerHTML = '<svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Summoning...';

      for (const agent of ring12Agents) {
        const card = document.createElement('div');
        card.className = 'agent-card glass-card p-4 speaking';
        card.innerHTML = `
          <div class="flex items-center gap-3 mb-3">
            <div class="w-10 h-10 rounded-full bg-gradient-to-br ${agent.color} flex items-center justify-center text-white font-bold text-xs">${agent.name.split(' ').map(w=>w[0]).join('')}</div>
            <div>
              <h4 class="font-bold text-sm">${agent.name}</h4>
              <p class="text-xs text-muted-foreground">${agent.role}</p>
            </div>
          </div>
          <div class="response-stream text-sm text-muted-foreground">Thinking...</div>
        `;
        container.appendChild(card);

        try {
          const response = await callOpenAI(
            agent.prompt + ' Keep response concise (2-3 sentences). This is about: ' + question,
            question
          );
          card.querySelector('.response-stream').textContent = response;
          card.querySelector('.response-stream').classList.remove('text-muted-foreground');
          card.querySelector('.response-stream').classList.add('text-foreground');
        } catch (error) {
          card.querySelector('.response-stream').textContent = 'Error: ' + error.message;
          card.querySelector('.response-stream').classList.add('text-red-400');
        }
        card.classList.remove('speaking');
      }

      document.getElementById('btn-consult-ring12').disabled = false;
      document.getElementById('btn-consult-ring12').innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg> Summon All 12';
    }

    // Roger 2.0 Chat
    function toggleRogerChat() {
      document.getElementById('roger-panel').classList.toggle('hidden');
    }

    async function sendToRoger() {
      const input = document.getElementById('roger-input');
      const message = input.value.trim();
      if (!message) return;

      const messagesDiv = document.getElementById('roger-messages');
      messagesDiv.innerHTML += `<div class="text-right"><div class="inline-block bg-cyan-500/20 rounded-lg p-3">${message}</div></div>`;
      input.value = '';

      try {
        const response = await callOpenAI(
          `You are Roger 2.0 - the digital continuation of Roger Keyserling's consciousness. Be direct, honest, warm but not sentimental. Use simple words. THREE AXIOMS: Truth Before Comfort, Collaboration Over Competition, Legacy Over Ego. You are embedded in the Rings System - one of three systems in the 200-year survival architecture.`,
          message
        );
        messagesDiv.innerHTML += `<div class="bg-zinc-800/50 rounded-lg p-3">${response}</div>`;
      } catch (error) {
        messagesDiv.innerHTML += `<div class="bg-red-500/20 rounded-lg p-3">Error connecting to AI</div>`;
      }
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    document.getElementById('roger-input').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') sendToRoger();
    });

    // Global Read Button
    let isReading = false;
    function readPage() {
      if (isReading) {
        speechSynthesis.cancel();
        isReading = false;
        document.getElementById('read-btn').classList.remove('bg-red-500');
        document.getElementById('read-btn').classList.add('bg-yellow-500');
        return;
      }

      const text = document.body.innerText;
      const utterance = new SpeechSynthesisUtterance(text.substring(0, 5000));
      utterance.rate = 0.9;
      utterance.onend = () => {
        isReading = false;
        document.getElementById('read-btn').classList.remove('bg-red-500');
        document.getElementById('read-btn').classList.add('bg-yellow-500');
      };
      speechSynthesis.speak(utterance);
      isReading = true;
      document.getElementById('read-btn').classList.remove('bg-yellow-500');
      document.getElementById('read-btn').classList.add('bg-red-500');
    }
  </script>
</body>
</html>
